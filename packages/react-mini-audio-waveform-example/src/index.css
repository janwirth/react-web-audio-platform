@import "tailwindcss";

@custom-variant dark (&:where(.dark, .dark *));

@source "../index.html";
@source "../src/**/*.{js,ts,jsx,tsx}";

@layer base {
  * {
    margin: 0;
    padding: 0;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
  }

  body {
    font-family: sans-serif;
    padding: 2rem;
    @apply bg-white dark:bg-black text-gray-900 dark:text-gray-100 transition-colors;
  }
}

.range-slider {
  /* Slider */
  .input-range {
    -webkit-appearance: none;
    height: 200px;
    border-radius: 5px;
    background: #ccc;
    outline: none;
    writing-mode: bt-lr; /* IE */
    -webkit-appearance: slider-vertical; /* WebKit */
  }
}

/* Firefox Overrides */
::-moz-range-track {
  background: #ccc;
  border: 0;
}

input::-moz-focus-inner {
  border: 0;
}

/* Cover Flow Styles - Scroll-driven animations require custom CSS */
.scrollbar-none {
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.scrollbar-none::-webkit-scrollbar {
  display: none;
}

.coverflow-wrapper {
  perspective: 1000px;
  perspective-origin: center center;
}

.coverflow-cover {
  transform-style: preserve-3d;
  will-change: transform;
  backface-visibility: hidden;
  -webkit-box-reflect: below 8px linear-gradient(to bottom, rgba(0, 0, 0, 0.4), transparent 60%);
}

.coverflow-cover img {
  -webkit-user-drag: none;
  user-drag: none;
}

/* Fallback reflection for non-WebKit browsers using pseudo-element */
@supports not (-webkit-box-reflect: below) {
  .coverflow-cover::after {
    content: "";
    position: absolute;
    top: 100%;
    left: 0;
    width: 100%;
    height: 100%;
    transform: scaleY(-1);
    opacity: 0.3;
    background: inherit;
    pointer-events: none;
    mask-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.6), transparent 60%);
    -webkit-mask-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.6), transparent 60%);
  }
}

/* Use CSS scroll-driven animations when supported */
@supports (animation-timeline: view()) {
  .coverflow-cover {
    animation: coverflow-rotate linear;
    animation-timeline: view();
    animation-range: entry 0% exit 100%;
  }
}

@keyframes coverflow-rotate {
  0% {
    transform: perspective(1000px) rotateY(45deg) scale(0.8);
    opacity: 0.6;
  }
  50% {
    transform: perspective(1000px) rotateY(0deg) scale(1);
    opacity: 1;
  }
  100% {
    transform: perspective(1000px) rotateY(-45deg) scale(0.8);
    opacity: 0.6;
  }
}

@media (prefers-reduced-motion: reduce) {
  .coverflow-cover {
    animation: none;
    transform: rotateY(0deg) scale(1);
    opacity: 1;
  }
}
